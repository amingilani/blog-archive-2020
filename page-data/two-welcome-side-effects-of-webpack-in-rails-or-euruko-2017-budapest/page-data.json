{"componentChunkName":"component---node-modules-gatsby-theme-medium-to-own-blog-src-templates-blog-post-js","path":"/two-welcome-side-effects-of-webpack-in-rails-or-euruko-2017-budapest/","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://amin.gilani.me/blog","githubUrl":"https://github.com/amingilani/blog"}},"mdx":{"fields":{"slug":"/two-welcome-side-effects-of-webpack-in-rails-or-euruko-2017-budapest/"},"excerpt":"I began working with the back-end with Node, back in the Node v0.10.x days when the React vs. Angular debate was very new and very, very hot…","timeToRead":3,"frontmatter":{"title":"Two Welcome Side Effects of Webpack in Rails | EuRuKo 2017 — Budapest","description":"I began working with the back-end with Node, back in the Node v0.10.x days when the React vs. Angular debate was very new and very, very…","categories":[],"date":"September 19, 2017","canonical_link":"https://medium.com/@gilani/two-welcome-side-effects-of-webpack-in-rails-euruko-2017-budapest-925cc8d7e55"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Two Welcome Side Effects of Webpack in Rails | EuRuKo 2017 — Budapest\",\n  \"description\": \"I began working with the back-end with Node, back in the Node v0.10.x days when the React vs. Angular debate was very new and very, very…\",\n  \"date\": \"2017-09-19T00:00:00.000Z\",\n  \"categories\": [],\n  \"published\": true,\n  \"canonical_link\": \"https://medium.com/@gilani/two-welcome-side-effects-of-webpack-in-rails-euruko-2017-budapest-925cc8d7e55\",\n  \"redirect_from\": [\"/two-welcome-side-effects-of-webpack-in-rails-euruko-2017-budapest-925cc8d7e55\"]\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I began working with the back-end with Node, back in the Node v0.10.x days when the React vs. Angular debate was very new and very, very hot. I was getting very tired of copying boilerplate code when someone introduced me to Ruby on Rails 4, and the idea of convention over configuration. A few months later, I was hooked. It was suddenly like being able breathe freely. Writing back-end code becomes quick and trivial.\"), mdx(\"p\", null, \"Ruby on Rails is great for prototyping and building an MVP, in fact, being a freelance software engineer at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://toptal.com/top-3-percent?utm_source=euroko2017HU&utm_medium=logo&utm_campaign=sponsorships\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Toptal\"), \", I get to work with clients of all sizes, building web applications to solve interesting problems. However, when you start doing anything advanced on the front-end, you realize that, here, Rails conventions become a bit basic. The good news is that Rails 5.1 fixes everything with Yarn and Webpack.\"), mdx(\"p\", null, \"Yarn and Webpack. Ruby on Rails 5.1 ships with the two things you need to make a wonderful front-end, with your favorite front-end framework, and it gets rid of the jQuery dependency. It\\u2019s official, Ruby on Rails is now a wonderful framework, not just on the back-end, but the front-end as well!\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/rails/webpacker\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Rails/Webpacker\"), \" description would have you believe that this tool is meant to be used only for front-end application frameworks:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Webpacker makes it easy to use the JavaScript pre-processor and bundler\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://webpack.js.org/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Webpack 3.x.x+\")), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"to manage application-like JavaScript in Rails. It coexists with the asset pipeline, as the primary purpose for Webpack is app-like JavaScript, not images, CSS, or even JavaScript Sprinkles (that all continues to live in app/assets).\"))), mdx(\"p\", null, \"But I\\u2019m here to tell you otherwise. A side-effect of Webpack is that it fixes my two pet peeves with Ruby on Rails:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The hacks to support front-end dependencies\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The inability to use URL helpers in third-party CSS dependencies\")), mdx(\"h3\", {\n    \"id\": \"managing-front-end-dependencies-with-yarn\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#managing-front-end-dependencies-with-yarn\",\n    \"aria-label\": \"managing front end dependencies with yarn permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Managing Front-end Dependencies with\\xA0Yarn\"), mdx(\"p\", null, \"The current asset pipeline requires a bit of hacking to support even the dependency management behavior, and pure CSS libraries that link assets simply aren\\u2019t compatible with Rails without rewriting declaring their paths with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://guides.rubyonrails.org/asset_pipeline.html#css-and-sass\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"helpers\"), \" because of the way Rails renames and adds digests to asset paths in production. Historically, the way to get around this has been to use a CDN. More on this later.\"), mdx(\"p\", null, \"In the past, if you really needed Bootstrap, you had four ways to include it in your project:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://rails-assets.org/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Rails-Assets.org\"), \": this third-party gem server is a proxy to install Bower dependencies via bundler. Add the following like to your \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Gemfile\"), \":\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"gem 'rails-assets-bootstrap', source: 'https://rails-assets.org'\\n\")), mdx(\"p\", null, \"Require the minified version to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"application.js\"), \":\"), mdx(\"p\", null, \"And then require the minified version to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"application.css\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Use a CDN: the easiest way to get a dependency was to load your dependency from a CDN by adding the following to your view or layout:\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"<!-- Latest compiled and minified CSS --> <link rel=\\\"stylesheet\\\" href=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\\\" integrity=\\\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\\\" crossorigin=\\\"anonymous\\\"> <!-- Optional theme --> <link rel=\\\"stylesheet\\\" href=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css\\\" integrity=\\\"sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp\\\" crossorigin=\\\"anonymous\\\"> <!-- Latest compiled and minified JavaScript --> <script src=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\\\" integrity=\\\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\\\" crossorigin=\\\"anonymous\\\"></script>\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Install a package manager:\")), mdx(\"p\", null, \"If you were serious about dependency management with the right tools, you could either install and initialize Bower or NPM and set them up yourself, use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[bower-rails](https://github.com/rharriso/bower-rails)\"), \" \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[npm-rails](https://github.com/endenwer/npm-rails)\"), \" gem, initialize an NPM package, and\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Copy dependency code to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vendors\"), \": The \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"worst\"), \" and most common thing to do was to copy and paste the third-party code to the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"vendors\"), \" directory and include that in your asset pipeline.\")), mdx(\"p\", null, \"These took time to implement, and felt incredibly hacky, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not anymore!\")), mdx(\"p\", null, \"With Rails 5.1, Yarn support is baked right into the framework! The power of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"NPM repository\"), \" is now at your fingertips. Oh, you want Bootstrap on your framework?\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"$ yarn add bootstrap yarn add v0.27.5 warning ../../package.json: No license field info No lockfile found. [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... [4/4] Building fresh packages... success Saved lockfile. success Saved 1 new dependency. \\u2514\\u2500 bootstrap@3.3.7 Done in 1.72s.\\n\")), mdx(\"p\", null, \"This command adds the package to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" file and installs to the local \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules\"), \" folder.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"--- a/package.json +++ b/package.json @@ -1,5 +1,7 @@  { \\\"name\\\": \\\"whazzap\\\", \\\"private\\\": true, - \\\"dependencies\\\": {} + \\\"dependencies\\\": { + \\\"bootstrap\\\": \\\"^3.3.7\\\" + }  }\\n\")), mdx(\"p\", null, \"To include Bootstrap in your app, require the path of your files relative to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules\"), \". In this case, since the compiled Bootstrap files are at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"node_modules/bootstrap/dist/\"), \", we make the following changes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"# app/assets/javascripts/application.js +//= require bootstrap/dist/js/bootstrap.min.js # app/assets/stylesheets/application.css + *= require bootstrap/dist/css/bootstrap.min.css\\n\")), mdx(\"p\", null, \"At this point, Bootstrap should be fully loaded and working for your app. This is wonderful!\"), mdx(\"h3\", {\n    \"id\": \"pure-css-libraries-without-rails-helpers\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#pure-css-libraries-without-rails-helpers\",\n    \"aria-label\": \"pure css libraries without rails helpers permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Pure CSS Libraries without Rails\\xA0Helpers\"), mdx(\"p\", null, \"Rails just doesn\\u2019t play well with CSS libraries. If a library links to contained assets using a regular CSS \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"url()\"), \" declaration, the asset won\\u2019t load in production\\u2014i.e, if your library sets the background image in CSS using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"background-image: url('background.png');\"), \" it won\\u2019t work in production because the image\\u2019s public path will become \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"background-e96ed6bdb4a9942747db0179ec8aeb9d995fdf06cb5c2caeaea5ceb7651ac2fd.png\"), \". The only way to fix this with the Rails asset pipeline is to rewrite the CSS with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"background-image: image-url('background.png');\"), \" which you can\\u2019t do at all since your library is fetched via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"yarn\"), \".\"), mdx(\"p\", null, \"Webpack allows you to get around this!\"), mdx(\"p\", null, \"The short version is that you can import CSS in your webpacks. Let\\u2019s use Semantic UI CSS as an example, which links to Font Awesome using:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"src: url(\\\"./themes/default/assets/fonts/icons.eot\\\");\\n\")), mdx(\"p\", null, \"And there\\u2019s no way for you to edit this line.\"), mdx(\"p\", null, \"With Webpack, a way to get around this is to import the CSS not in your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"app/assets/stylesheets/application.css\"), \", but instead in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"app/javascript/packs/application.js\"), \" such as below:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"import 'semantic-ui-css/semantic';\\n\")), mdx(\"p\", null, \"Then require this pack as a stylesheet asset in your view with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"<%= stylesheet_pack_tag \\\"stylesheets\\\", :media => 'all' %>\\n\")), mdx(\"h3\", {\n    \"id\": \"closing-thoughts-and-acknowledgements\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#closing-thoughts-and-acknowledgements\",\n    \"aria-label\": \"closing thoughts and acknowledgements permalink\",\n    \"className\": \"anchor before\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Closing thoughts and acknowledgements\"), mdx(\"p\", null, \"Rails has once again become a very modern web framework. This change has me more excited than websockets support in Rails 5 through Action Cable.\"), mdx(\"p\", null, \"I\\u2019d like to acknowledge the wonderful community of \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://euruko2017.org/2017/09/19/toptal.com/ruby\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), \"Ruby developers\"), \" at Toptal. Without the fun discussions I have with them, I would never have been driven to explore the interesting ways to use Webpack, and these tricks would never have been discovered.\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Originally published at\"), \" \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://euruko2017.org/2017/09/19/two-welcome-side-effects-of-webpack-in-rails.html\",\n    \"target\": \"_blank\",\n    \"rel\": \"nofollow noopener noreferrer\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"euruko2017.org\")), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"on September 19, 2017.\")));\n}\n;\nMDXContent.isMDXComponent = true;"},"allWebMentionEntry":{"nodes":[]}},"pageContext":{"id":"11b96cad-fb4e-5991-83d7-4185b95978a3","previous":{"id":"9db368da-1aef-53dc-91d8-eac1944c2173","fields":{"slug":"/custom-slugs-for-rails-urls-done-right/","published":true},"frontmatter":{"redirect_from":["/using-custom-slugs-for-rails-urls-500eb3f58f3c"],"title":"Custom slugs for Rails URLs done right"}},"next":{"id":"3b997a76-76d3-5935-b85f-5d91021426ba","fields":{"slug":"/unlimited-scale-and-free-web-hosting-with-github-pages-and-cloudflare/","published":true},"frontmatter":{"redirect_from":["/unlimited-scale-and-free-web-hosting-with-github-pages-and-cloudflare-6aaab2cf0451"],"title":"Unlimited Scale and Free Web Hosting with GitHub Pages and Cloudflare"}},"permalink":"https://amin.gilani.me/blog/two-welcome-side-effects-of-webpack-in-rails-or-euruko-2017-budapest/","themeOptions":{"plugins":[],"config":{"title":"Amin Shah Gilani","description":"Amin Shah Gilani's blog","shortBio":"Amin is startup interim-CTO, a part-time grad student at Georgia Tech, former startup CTO & CEO, and former editor at Toptal's engineering blog","bio":"Amin is startup interim-CTO, a part-time grad student at Georgia Tech, former startup CTO & CEO, and former editor at Toptal's engineering blog","author":"Amin Shah Gilani","githubUrl":"https://github.com/amingilani/blog","siteUrl":"https://amin.gilani.me/blog/","pathPrefix":"/blog/","social":{"twitter":"amingilani","medium":"@gilani","facebook":"aminshahgilani","github":"amingilani","linkedin":"amingilani","instagram":"amingilani"},"goatCounterCode":null}}}}}